<div class="mat-typography">
  <div style="display:flex">
      <h2 *ngIf="isNew" style="margin: 0; ">Agrega una nueva prenda a tu catálogo</h2>
      <h2 *ngIf="!isNew" style="margin: 0; ">Actualizar prenda</h2>
  </div>
  <h4 *ngIf="isNew" style="margin: 0;">A continuación ingresa la información de la prenda.</h4>
</div>

<div style="display: table-caption; margin-top: 15px">

  <form [formGroup]="articleForm" style="display: flex;">
    <div #secondColumn style="display: inline-table;margin-left: 10px; width: 240px">
      <div>
        <mat-form-field style="width: 95%">
          <input matInput type="text" placeholder="Titulo" formControlName="title" value={{articleData.title}}>
        </mat-form-field>
        <mat-form-field style="width: 95%">
          <input matInput type="text" placeholder="Código" formControlName="code" value={{articleData.code}}>
        </mat-form-field>
        <mat-form-field style="width: 95%">
          <input matInput type="text" placeholder="Proveedor" formControlName="provider" value={{articleData.provider}}>
        </mat-form-field>
        <mat-form-field style="width: 95%">
          <input matInput type="number" placeholder="Precio" formControlName="cost" value={{articleData.cost}}>
        </mat-form-field>
        <mat-form-field style="width: 95%">
          <input matInput type="number" placeholder="Stock inicial" formControlName="initial_stock" value={{articleData.initial_stock}}>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field style="width: 95%">
          <input matInput placeholder="Material" formControlName="material" value={{articleData.material}}>
        </mat-form-field>
      </div>

    </div>

    <div #firstColumn style="display: inline-table; width: 200px; height: 315px; position: relative; margin-left: 5px">
      <div style="padding-top: 13px;">
        <div style="display:flex">
          <img-cropper *ngIf="actualImageId === 0" #cropper [image]="data[0]" [settings]="cropperSettings"></img-cropper>
          <img-cropper *ngIf="actualImageId === 1" #cropper [image]="data[1]" [settings]="cropperSettings"></img-cropper>
          <img-cropper *ngIf="actualImageId === 2" #cropper [image]="data[2]" [settings]="cropperSettings"></img-cropper>
          <input hidden class="file-input" #imgFileInput type="file" (change)="fileChangeListener($event)" >
        </div>
            <div class="articlePhotosContainer">
              <div class="photo" style="border-right: 0px;" (click)="imgFileInput.click()" (click)="setImageID(0)"><img class="miniImage" src="{{data[0].src}}" /></div>
              <div class="photo" style="border-right: 0px;" (click)="imgFileInput.click()" (click)="setImageID(1)"><img class="miniImage" src="{{data[1].src}}" /></div>
              <div class="photo" (click)="imgFileInput.click()" (click)="setImageID(2)"><img class="miniImage" src="{{data[2].src}}" /></div>
            </div>
        <!--

          <button type="button" mat-raised-button style="display: block; margin-left: auto; margin-right: auto; margin-top: 10px;  background-color: #9C27B0;color: white"
          (click)="imgFileInput.click()">Añade una foto</button>
        -->
      </div>
      <mat-form-field style="margin-top: 22px;width: 95%">
        <mat-chip-list #chipList3>
          <mat-chip *ngFor="let color of colors" [selectable]="selectable" [removable]="removable" (removed)="removeColor(color)">
            {{color}}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
          </mat-chip>
          <input style="width: 100%" placeholder="Colores Disponibles" #sizesInput [formControl]="colorsCtrl"
            [matChipInputFor]="chipList3" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
             (matChipInputTokenEnd)="addColor($event)" autofocus>
        </mat-chip-list>
        <!--<input matInput placeholder="Etiquetas" formControlName="tags" value={{articleData.tags}}>-->
      </mat-form-field>
    </div>
  </form>
</div>

<div #thirtColumn style="margin-left: 10px">
    <form [formGroup]="articleForm" style="display: flex;">
        <mat-form-field style="width: 97.5%">
            <mat-chip-list #chipList2>
              <mat-chip *ngFor="let size of sizes" [selectable]="selectable" [removable]="removable" (removed)="removeSize(size)">
                {{size}}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
              <input style="width: 100%" placeholder="Talles" #sizesInput [formControl]="sizesCtrl"
                [matChipInputFor]="chipList2" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                 (matChipInputTokenEnd)="addSize($event)" autofocus>
            </mat-chip-list>
            <!--<input matInput placeholder="Etiquetas" formControlName="tags" value={{articleData.tags}}>-->
          </mat-form-field>
    </form>
  </div>

<div #forthColumn style="margin-left: 10px">
  <form [formGroup]="articleForm" style="display: flex;">
    <mat-form-field style="width: 97.5%">
      <mat-chip-list #chipList>
        <mat-chip *ngFor="let tag of tags" [selectable]="selectable" [removable]="removable" (removed)="remove(tag)">
          {{tag}}
          <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
        </mat-chip>
        <input style="width: 100%" placeholder="Elije las etiquetas" #tagsInput [formControl]="tagsCtrl"
          [matAutocomplete]="auto" [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)" autofocus>
      </mat-chip-list>
      <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
        <mat-option *ngFor="let tag of filteredTags | async" [value]="tag">
          {{tag}}
        </mat-option>
      </mat-autocomplete>
      <!--<input matInput placeholder="Etiquetas" formControlName="tags" value={{articleData.tags}}>-->
    </mat-form-field>
  </form>
</div>

<div mat-dialog-actions align="end">
  <button *ngIf="!isNew" [disabled]="isUpLoading" style="background-color: #9C27B0; color: white" type="button"
    mat-raised-button (click)="refreshArticle($event)">Actualizar
    Prenda
  </button>
  <button *ngIf="isNew" [disabled]="isUpLoading" style="background-color: #9C27B0; color: white" type="button"
    mat-raised-button (click)="startUpload($event.target.files)">Agregar
    Prenda
  </button>
</div>
